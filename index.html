<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscribe Openly</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="icon.svg" type="image/png">
    <meta name="description" content="Subscribe to websites openly with your preferred feed reader.">
</head>
<body>
    <main>
        <hgroup>
            <img src="icon.svg" alt="Subscribe Openly Icon" width="64" height="64">
            <h1>Subscribe Openly</h1>
        </hgroup>
        <label for="url">Website URL</label>
        <form method="GET" action="/subscribe/">
            <input type="url" placeholder="https://example.com" name="url" id="url" pattern="https?://.+" required>
            <button type="submit">Subscribe</button>
        </form>
        <footer>
            <p><a href="/about/">Use Subscribe Openly on your own website.</a></p>
            <p>Maintained by <a href="https://jamesg.blog">capjamesg</a>. <a href="https://github.com/capjamesg/subscribe-openly">View source</a>.</p>
        </footer>
    </main>
    <script>
        /* add http:// to URL fields on blur or when enter is pressed */
        /* https://aaronparecki.com/2018/06/03/4/url-form-field */
        document.addEventListener('DOMContentLoaded', function() {
            function addDefaultScheme(target) {
            if(target.value.match(/^(?!https?:).+\..+/)) {
                target.value = "http://"+target.value;
            }
            }
            var elements = document.querySelectorAll("input[type=url]");
            Array.prototype.forEach.call(elements, function(el, i){
            el.addEventListener("blur", function(e){
                addDefaultScheme(e.target);
            });
            el.addEventListener("keydown", function(e){
                if(e.keyCode == 13) {
                addDefaultScheme(e.target);
                }
            });
            });
        });

        </script>
</body>
</html>
